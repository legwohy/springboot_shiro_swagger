<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.swagger.dao.UserDao" >

	<!-- 状态查询用户-->
	<select id="findUserH"  resultType="map">
		select *from user_cobra where status=1
	</select>
	<!-- 通过主键查询用户-->
	<select id="findUserByIdH" resultType="com.swagger.entirty.User" parameterType="map">
		select *from user_cobra where id=#{id} and status=1
	</select>
	<select id="findUser"  resultType="com.swagger.entirty.User">
		select *from user_cobra where status=1
	</select>
	<select id="findUserByPhone" resultType="com.swagger.entirty.User" parameterType="string">
		select *from user_cobra where user_phone=#{userPhone} and status=1
	</select>
	<select id="findUserById" resultType="com.swagger.entirty.User" parameterType="int">
		select *from user_cobra where user_phone=#{id} and status=1
	</select>

	<!-- 添加用户-->
	<insert id="insertUser" parameterType="com.swagger.entirty.User">
		insert into user_cobra(username,realname,user_phone,gender,birthday,address,password)
		values(#{username},#{realname},#{userPhone},#{gender},#{birthday},#{address},#{password})
	</insert>

	<!-- 删除用户-->
	<delete id="deleteUser" parameterType="int" >
		update user_cobra set status=2 where id=#{id}
	</delete>

	<!-- 跟新用户-->
	<update id="updateUser" parameterType="com.swagger.entirty.User">
		update user_cobra
		<trim prefix="set" suffixOverrides="," suffix="where id=#{id}">
			<if test="realname != null and realname != ''">
				realname=#{realname},
			</if>
			<if test="name != null and name != ''">
				name=#{name},
			</if>
			<if test="phone != null and phone != ''">
				phone=#{phone},
			</if>
			<if test="gender != null and gender != ''">
				gender=#{gender},
			</if>
			<if test="age != null and age != ''">
				age=#{age},
			</if>
			<if test="address != null and address != ''">
				address=#{address},
			</if>
			<if test="status != null and status != ''">
				status=#{status}
			</if>
		</trim>
	</update>
	<update id="updateUserH" parameterType="map">
		update user_cobra
		<trim prefix="set" suffixOverrides="," suffix="where id=#{id}">
			<if test="realname != null and realname != ''">
				realname=#{realname},
			</if>
			<if test="name != null and name != ''">
				name=#{name},
			</if>
			<if test="phone != null and phone != ''">
				phone=#{phone},
			</if>
			<if test="gender != null and gender != ''">
				gender=#{gender},
			</if>
			<if test="age != null and age != ''">
				age=#{age},
			</if>
			<if test="address != null and address != ''">
				address=#{address},
			</if>
			<if test="status != null and status != ''">
				status=#{status}
			</if>
		</trim>
	</update>

</mapper>